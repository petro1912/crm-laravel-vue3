import{_ as ee}from"./DialogCloseBtn-29845159.js";import{g as q}from"./auth-368f15e6.js";import{a as w}from"./axios-e8837589.js";import{a as $,V as ae}from"./VRow-01833b0d.js";import{j as u,G as A,a2 as le,r as te,o as _,c as g,n as e,w as a,l as s,L as p,F as E,a as P,p as i,q as oe,x as R,z as D,E as j,C as c}from"./main-08db9eca.js";import{V as G}from"./VDivider-4da7b810.js";import{V as U,d as h,b as L,c as se,a as K}from"./VCard-4a2f6ead.js";import{V as ne}from"./VTextField-bfab999d.js";import{V as ie}from"./VSelect-c797c995.js";import{V as O}from"./VDialog-dc1b1272.js";import{V as H}from"./VSpacer-9cb5ead1.js";import"./forwardRefs-7b02b8f0.js";import"./transition-6efa60be.js";import"./VAvatar-f99f38b4.js";import"./VImg-c259e2b4.js";import"./VList-47c889fc.js";import"./VMenu-dc90384d.js";import"./VCheckboxBtn-777f44ee.js";const re={class:"flat-card"},ue={class:"d-flex w-full align-center justify-between mb-2"},de=s("div",{class:"v-card-title"}," Categories ",-1),ce=["onClick"],me={class:"d-flex gap-1"},fe={class:"flat-card"},ve={class:"d-flex w-full align-center justify-between mb-2"},pe=s("div",{class:"v-card-title"}," Sub Categories ",-1),_e={class:"d-flex gap-1"},J={__name:"CategoryList",props:{baseUrl:{type:String,required:!0}},setup(z){const C=z,I={value:-1,title:"Main"},m=u([]),V=u([]),y=u(-1),B=u(-1),r=u(!1),f=u(!1),Q=A(()=>V.value.filter(o=>o.parent_id==y.value)),S=A(()=>[I,...m.value.map(o=>({value:o.id,title:o.name}))]),b=u(q),v=u(I),W=o=>{y.value=o},N=o=>{o?v.value="Main":v.value=S.value.find(l=>l.value==y.value),b.value=q,r.value=!0},T=o=>{b.value=o,r.value=!0},F=o=>{B.value=o,f.value=!0},M=()=>{r.value=!1},X=()=>{f.value=!1},Y=()=>{const o={...b.value},l=o.id,d=v.value;if(delete o.id,!d)return;const x=S.value.find(t=>t.value==d.value);x==null||x.value==-1?delete o.parent_id:o.parent_id=x.value,l==-1?w.post(C.baseUrl,o).then(t=>{const{data:n}=t.data;m.value=n.categories,V.value=n.sub_categories,r.value=!1}):w.put(`${C.baseUrl}/${l}`,o).then(t=>{const{data:n}=t.data;m.value=n.categories,V.value=n.sub_categories,r.value=!1})},Z=()=>{w.delete(`${C.baseUrl}/${B.value}`).then(o=>{const{data:l}=o.data;m.value=l.categories,V.value=l.sub_categories,B.value=-1,f.value=!1})};return le(()=>{w.get(C.baseUrl).then(o=>{const{data:l}=o.data;m.value=l.categories,V.value=l.sub_categories,l.categories.length>0&&(y.value=l.categories[0].id)})}),(o,l)=>{const d=te("IconBtn"),x=ee;return _(),g("div",null,[e(ae,null,{default:a(()=>[e($,{cols:"12",md:"1"}),e($,{cols:"6",md:"5"},{default:a(()=>[s("div",re,[s("div",ue,[de,e(p,{size:"small",icon:"tabler-plus",onClick:l[0]||(l[0]=t=>N(!0))})]),e(G),s("div",null,[(_(!0),g(E,null,P(i(m),(t,n)=>(_(),g("div",{key:n,class:"d-flex w-full align-center justify-between mb-2 px-3 pt-2"},[s("div",{class:oe(["cursor-pointer w-full",i(y)==t.id?"text-success":""]),onClick:k=>W(t.id)},R(t.name),11,ce),s("div",me,[e(d,{onClick:k=>T(t)},{default:a(()=>[e(D,{icon:"mdi-pencil-outline"})]),_:2},1032,["onClick"]),e(d,{onClick:k=>F(t.id)},{default:a(()=>[e(D,{icon:"mdi-delete-outline"})]),_:2},1032,["onClick"])])]))),128))])])]),_:1}),e($,{cols:"6",md:"5"},{default:a(()=>[s("div",fe,[s("div",ve,[pe,e(p,{size:"small",icon:"tabler-plus",onClick:l[1]||(l[1]=t=>N(!1))})]),e(G),s("div",null,[(_(!0),g(E,null,P(i(Q),(t,n)=>(_(),g("div",{key:n,class:"d-flex w-full align-center justify-between px-2 pt-2"},[s("span",null,R(t.name),1),s("div",_e,[e(d,{onClick:k=>T(t)},{default:a(()=>[e(D,{icon:"mdi-pencil-outline"})]),_:2},1032,["onClick"]),e(d,{onClick:k=>F(t.id)},{default:a(()=>[e(D,{icon:"mdi-delete-outline"})]),_:2},1032,["onClick"])])]))),128))])])]),_:1}),e($,{cols:"12",md:"1"})]),_:1}),e(O,{modelValue:i(r),"onUpdate:modelValue":l[4]||(l[4]=t=>j(r)?r.value=t:null),"max-width":"720"},{default:a(()=>[e(x,{onClick:M}),e(U,{title:"Campaign Category"},{default:a(()=>[e(h,null,{default:a(()=>[e(ne,{class:"mb-4",modelValue:i(b).name,"onUpdate:modelValue":l[2]||(l[2]=t=>i(b).name=t),label:"Category Name"},null,8,["modelValue"]),e(ie,{class:"mb-4",modelValue:i(v),"onUpdate:modelValue":l[3]||(l[3]=t=>j(v)?v.value=t:null),items:i(S),variant:"outlined",label:"Parent Category"},null,8,["modelValue","items"])]),_:1}),e(h,{class:"d-flex justify-end flex-wrap gap-3"},{default:a(()=>[e(p,{variant:"tonal",color:"secondary",onClick:M},{default:a(()=>[c(" Close ")]),_:1}),e(p,{onClick:Y},{default:a(()=>[c(" Save ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(O,{modelValue:i(f),"onUpdate:modelValue":l[5]||(l[5]=t=>j(f)?f.value=t:null),"max-width":"500px"},{default:a(()=>[e(U,null,{default:a(()=>[e(L,{class:"px-8 py-8"},{default:a(()=>[c(" Are you sure you want to delete this category? ")]),_:1}),e(se,null,{default:a(()=>[e(H),e(p,{color:"error",variant:"outlined",onClick:X},{default:a(()=>[c(" Cancel ")]),_:1}),e(p,{color:"success",variant:"elevated",onClick:Z},{default:a(()=>[c(" OK ")]),_:1}),e(H)]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}},Ne={__name:"index",setup(z){return(C,I)=>(_(),g("div",null,[e(U,null,{default:a(()=>[e(K,null,{default:a(()=>[e(L,null,{default:a(()=>[c("Campaign Categories List")]),_:1})]),_:1}),e(h,null,{default:a(()=>[e(J,{baseUrl:"/admin/campaign-categories"})]),_:1})]),_:1}),e(U,{class:"mt-4"},{default:a(()=>[e(K,null,{default:a(()=>[e(L,null,{default:a(()=>[c("Progress Status List")]),_:1})]),_:1}),e(h,null,{default:a(()=>[e(J,{baseUrl:"/admin/progress-categories"})]),_:1})]),_:1})]))}};export{Ne as default};
