import{_ as ee}from"./DialogCloseBtn-10ae58d1.js";import{g as E}from"./auth-149aec28.js";import{a as w}from"./axios-ae36d123.js";import{a as $,V as ae}from"./VRow-44434673.js";import{j as d,G as M,a2 as le,r as te,o as _,c as g,n as e,w as a,l as s,L as p,F as P,a as R,p as r,q as oe,x as G,z as D,E as L,C as c}from"./main-61484bfe.js";import{V as K}from"./VDivider-792f6d40.js";import{V as U,d as h,b as z,c as se,a as O}from"./VCard-eed1f9ea.js";import{V as ne}from"./VTextField-a174cf70.js";import{V as ie}from"./VSelect-763f483b.js";import{V as H}from"./VDialog-b69e3ed7.js";import{V as J}from"./VSpacer-503329da.js";import"./forwardRefs-6ee72851.js";import"./transition-a33c81e5.js";import"./VAvatar-08392dd6.js";import"./VImg-269a0fda.js";import"./VList-3e5c49b3.js";import"./VMenu-d32181aa.js";import"./VCheckboxBtn-7abc63b4.js";const re={class:"flat-card"},ue={class:"d-flex w-full align-center justify-between mb-2"},de=s("div",{class:"v-card-title"}," Categories ",-1),ce=["onClick"],me={class:"d-flex gap-1"},fe={class:"flat-card"},ve={class:"d-flex w-full align-center justify-between mb-2"},pe=s("div",{class:"v-card-title"}," Sub Categories ",-1),_e={class:"d-flex gap-1"},Q={__name:"CategoryList",props:{baseUrl:{type:String,required:!0}},setup(N){const C=N,I={value:-1,title:"Main"},m=d([]),V=d([]),y=d(-1),B=d(-1),u=d(!1),f=d(!1),W=M(()=>V.value.filter(o=>o.parent_id==y.value)),S=M(()=>[I,...m.value.map(o=>({value:o.id,title:o.name}))]),b=d(E),v=d(I),j=o=>{y.value=o},T=o=>{if(o)v.value=-1;else{const l=S.value.find(n=>n.value==y.value);v.value=l?l.value:-1}b.value=E,u.value=!0},F=o=>{b.value=o,u.value=!0},q=o=>{B.value=o,f.value=!0},A=()=>{u.value=!1},X=()=>{f.value=!1},Y=()=>{const o={...b.value},l=o.id,n=v.value;if(delete o.id,!n)return;const x=S.value.find(t=>t.value==n);x==null||x.value==-1?delete o.parent_id:o.parent_id=x.value,l==-1?w.post(C.baseUrl,o).then(t=>{const{data:i}=t.data;m.value=i.categories,V.value=i.sub_categories,u.value=!1,j(n)}):w.put(`${C.baseUrl}/${l}`,o).then(t=>{const{data:i}=t.data;m.value=i.categories,V.value=i.sub_categories,u.value=!1,j(n)})},Z=()=>{w.delete(`${C.baseUrl}/${B.value}`).then(o=>{const{data:l}=o.data;m.value=l.categories,V.value=l.sub_categories,B.value=-1,f.value=!1})};return le(()=>{w.get(C.baseUrl).then(o=>{const{data:l}=o.data;m.value=l.categories,V.value=l.sub_categories,l.categories.length>0&&(y.value=l.categories[0].id)})}),(o,l)=>{const n=te("IconBtn"),x=ee;return _(),g("div",null,[e(ae,null,{default:a(()=>[e($,{cols:"12",md:"1"}),e($,{cols:"6",md:"5"},{default:a(()=>[s("div",re,[s("div",ue,[de,e(p,{size:"small",icon:"tabler-plus",onClick:l[0]||(l[0]=t=>T(!0))})]),e(K),s("div",null,[(_(!0),g(P,null,R(r(m),(t,i)=>(_(),g("div",{key:i,class:"d-flex w-full align-center justify-between mb-2 px-3 pt-2"},[s("div",{class:oe(["cursor-pointer w-full",r(y)==t.id?"text-success":""]),onClick:k=>j(t.id)},G(t.name),11,ce),s("div",me,[e(n,{onClick:k=>F(t)},{default:a(()=>[e(D,{icon:"mdi-pencil-outline"})]),_:2},1032,["onClick"]),e(n,{onClick:k=>q(t.id)},{default:a(()=>[e(D,{icon:"mdi-delete-outline"})]),_:2},1032,["onClick"])])]))),128))])])]),_:1}),e($,{cols:"6",md:"5"},{default:a(()=>[s("div",fe,[s("div",ve,[pe,e(p,{size:"small",icon:"tabler-plus",onClick:l[1]||(l[1]=t=>T(!1))})]),e(K),s("div",null,[(_(!0),g(P,null,R(r(W),(t,i)=>(_(),g("div",{key:i,class:"d-flex w-full align-center justify-between px-2 pt-2"},[s("span",null,G(t.name),1),s("div",_e,[e(n,{onClick:k=>F(t)},{default:a(()=>[e(D,{icon:"mdi-pencil-outline"})]),_:2},1032,["onClick"]),e(n,{onClick:k=>q(t.id)},{default:a(()=>[e(D,{icon:"mdi-delete-outline"})]),_:2},1032,["onClick"])])]))),128))])])]),_:1}),e($,{cols:"12",md:"1"})]),_:1}),e(H,{modelValue:r(u),"onUpdate:modelValue":l[4]||(l[4]=t=>L(u)?u.value=t:null),"max-width":"720"},{default:a(()=>[e(x,{onClick:A}),e(U,{title:"Campaign Category"},{default:a(()=>[e(h,null,{default:a(()=>[e(ne,{class:"mb-4",modelValue:r(b).name,"onUpdate:modelValue":l[2]||(l[2]=t=>r(b).name=t),label:"Category Name"},null,8,["modelValue"]),e(ie,{class:"mb-4",modelValue:r(v),"onUpdate:modelValue":l[3]||(l[3]=t=>L(v)?v.value=t:null),items:r(S),variant:"outlined",label:"Parent Category"},null,8,["modelValue","items"])]),_:1}),e(h,{class:"d-flex justify-end flex-wrap gap-3"},{default:a(()=>[e(p,{variant:"tonal",color:"secondary",onClick:A},{default:a(()=>[c(" Close ")]),_:1}),e(p,{onClick:Y},{default:a(()=>[c(" Save ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(H,{modelValue:r(f),"onUpdate:modelValue":l[5]||(l[5]=t=>L(f)?f.value=t:null),"max-width":"500px"},{default:a(()=>[e(U,null,{default:a(()=>[e(z,{class:"px-8 py-8"},{default:a(()=>[c(" Are you sure you want to delete this category? ")]),_:1}),e(se,null,{default:a(()=>[e(J),e(p,{color:"error",variant:"outlined",onClick:X},{default:a(()=>[c(" Cancel ")]),_:1}),e(p,{color:"success",variant:"elevated",onClick:Z},{default:a(()=>[c(" OK ")]),_:1}),e(J)]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}},Ne={__name:"index",setup(N){return(C,I)=>(_(),g("div",null,[e(U,null,{default:a(()=>[e(O,null,{default:a(()=>[e(z,null,{default:a(()=>[c("Campaign Categories List")]),_:1})]),_:1}),e(h,null,{default:a(()=>[e(Q,{baseUrl:"/admin/campaign-categories"})]),_:1})]),_:1}),e(U,{class:"mt-4"},{default:a(()=>[e(O,null,{default:a(()=>[e(z,null,{default:a(()=>[c("Progress Status List")]),_:1})]),_:1}),e(h,null,{default:a(()=>[e(Q,{baseUrl:"/admin/progress-categories"})]),_:1})]),_:1})]))}};export{Ne as default};
