import{_ as ee}from"./DialogCloseBtn-d556812b.js";import{g as E}from"./auth-a813b017.js";import{a as w}from"./axios-4842e853.js";import{a as $,V as le}from"./VRow-ae45cd6e.js";import{j as d,G as M,a2 as ae,r as te,o as g,c as C,n as e,w as l,l as n,L as _,F as P,a as R,p as r,q as oe,x as G,z as D,E as L,C as c}from"./main-e5b21e6b.js";import{V as K}from"./VDivider-c47ed5c6.js";import{V as U,d as h,b as z,c as se,a as O}from"./VCard-a1828138.js";import{V as ne}from"./VTextField-cf3cb3b9.js";import{V as ie}from"./VSelect-46ecd8a5.js";import{V as H}from"./VDialog-655a0bf6.js";import{V as J}from"./VSpacer-3f1220e8.js";import"./forwardRefs-5c3acb7d.js";import"./transition-018643a2.js";import"./VAvatar-c48175a6.js";import"./VImg-90c8631f.js";import"./VList-c0ee9fa3.js";import"./VMenu-5ca51ed5.js";import"./VCheckboxBtn-ee012881.js";const re={class:"flat-card"},ue={class:"d-flex w-full align-center justify-between mb-2"},de=n("div",{class:"v-card-title"}," Categories ",-1),ce=["onClick"],me={class:"d-flex gap-1"},fe={class:"flat-card"},ve={class:"d-flex w-full align-center justify-between mb-2"},pe=n("div",{class:"v-card-title"}," Sub Categories ",-1),_e={class:"d-flex gap-1"},Q={__name:"CategoryList",props:{baseUrl:{type:String,required:!0}},setup(N){const V=N,I={value:-1,title:"Main"},m=d([]),y=d([]),f=d(-1),B=d(-1),u=d(!1),v=d(!1),W=M(()=>y.value.filter(o=>o.parent_id==f.value)),S=M(()=>[I,...m.value.map(o=>({value:o.id,title:o.name}))]),b=d(E),p=d(I),j=o=>{f.value=o},T=o=>{if(console.log(f.value),o)p.value=-1;else{const a=S.value.find(s=>s.value==f.value);p.value=a?a.value:-1}b.value=E,u.value=!0},F=o=>{b.value=o,u.value=!0},q=o=>{B.value=o,v.value=!0},A=()=>{u.value=!1},X=()=>{v.value=!1},Y=()=>{const o={...b.value},a=o.id,s=p.value;if(delete o.id,console.log("parent",s),!s)return;const x=S.value.find(t=>t.value==s);x==null||x.value==-1?delete o.parent_id:o.parent_id=x.value,a==-1?w.post(V.baseUrl,o).then(t=>{const{data:i}=t.data;m.value=i.categories,y.value=i.sub_categories,u.value=!1,j(s)}):w.put(`${V.baseUrl}/${a}`,o).then(t=>{const{data:i}=t.data;m.value=i.categories,y.value=i.sub_categories,u.value=!1,j(s)})},Z=()=>{w.delete(`${V.baseUrl}/${B.value}`).then(o=>{const{data:a}=o.data;m.value=a.categories,y.value=a.sub_categories,B.value=-1,v.value=!1})};return ae(()=>{w.get(V.baseUrl).then(o=>{const{data:a}=o.data;m.value=a.categories,y.value=a.sub_categories,a.categories.length>0&&(f.value=a.categories[0].id)})}),(o,a)=>{const s=te("IconBtn"),x=ee;return g(),C("div",null,[e(le,null,{default:l(()=>[e($,{cols:"12",md:"1"}),e($,{cols:"6",md:"5"},{default:l(()=>[n("div",re,[n("div",ue,[de,e(_,{size:"small",icon:"tabler-plus",onClick:a[0]||(a[0]=t=>T(!0))})]),e(K),n("div",null,[(g(!0),C(P,null,R(r(m),(t,i)=>(g(),C("div",{key:i,class:"d-flex w-full align-center justify-between mb-2 px-3 pt-2"},[n("div",{class:oe(["cursor-pointer w-full",r(f)==t.id?"text-success":""]),onClick:k=>j(t.id)},G(t.name),11,ce),n("div",me,[e(s,{onClick:k=>F(t)},{default:l(()=>[e(D,{icon:"mdi-pencil-outline"})]),_:2},1032,["onClick"]),e(s,{onClick:k=>q(t.id)},{default:l(()=>[e(D,{icon:"mdi-delete-outline"})]),_:2},1032,["onClick"])])]))),128))])])]),_:1}),e($,{cols:"6",md:"5"},{default:l(()=>[n("div",fe,[n("div",ve,[pe,e(_,{size:"small",icon:"tabler-plus",onClick:a[1]||(a[1]=t=>T(!1))})]),e(K),n("div",null,[(g(!0),C(P,null,R(r(W),(t,i)=>(g(),C("div",{key:i,class:"d-flex w-full align-center justify-between px-2 pt-2"},[n("span",null,G(t.name),1),n("div",_e,[e(s,{onClick:k=>F(t)},{default:l(()=>[e(D,{icon:"mdi-pencil-outline"})]),_:2},1032,["onClick"]),e(s,{onClick:k=>q(t.id)},{default:l(()=>[e(D,{icon:"mdi-delete-outline"})]),_:2},1032,["onClick"])])]))),128))])])]),_:1}),e($,{cols:"12",md:"1"})]),_:1}),e(H,{modelValue:r(u),"onUpdate:modelValue":a[4]||(a[4]=t=>L(u)?u.value=t:null),"max-width":"720"},{default:l(()=>[e(x,{onClick:A}),e(U,{title:"Campaign Category"},{default:l(()=>[e(h,null,{default:l(()=>[e(ne,{class:"mb-4",modelValue:r(b).name,"onUpdate:modelValue":a[2]||(a[2]=t=>r(b).name=t),label:"Category Name"},null,8,["modelValue"]),e(ie,{class:"mb-4",modelValue:r(p),"onUpdate:modelValue":a[3]||(a[3]=t=>L(p)?p.value=t:null),items:r(S),variant:"outlined",label:"Parent Category"},null,8,["modelValue","items"])]),_:1}),e(h,{class:"d-flex justify-end flex-wrap gap-3"},{default:l(()=>[e(_,{variant:"tonal",color:"secondary",onClick:A},{default:l(()=>[c(" Close ")]),_:1}),e(_,{onClick:Y},{default:l(()=>[c(" Save ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(H,{modelValue:r(v),"onUpdate:modelValue":a[5]||(a[5]=t=>L(v)?v.value=t:null),"max-width":"500px"},{default:l(()=>[e(U,null,{default:l(()=>[e(z,{class:"px-8 py-8"},{default:l(()=>[c(" Are you sure you want to delete this category? ")]),_:1}),e(se,null,{default:l(()=>[e(J),e(_,{color:"error",variant:"outlined",onClick:X},{default:l(()=>[c(" Cancel ")]),_:1}),e(_,{color:"success",variant:"elevated",onClick:Z},{default:l(()=>[c(" OK ")]),_:1}),e(J)]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}},Ne={__name:"index",setup(N){return(V,I)=>(g(),C("div",null,[e(U,null,{default:l(()=>[e(O,null,{default:l(()=>[e(z,null,{default:l(()=>[c("Campaign Categories List")]),_:1})]),_:1}),e(h,null,{default:l(()=>[e(Q,{baseUrl:"/admin/campaign-categories"})]),_:1})]),_:1}),e(U,{class:"mt-4"},{default:l(()=>[e(O,null,{default:l(()=>[e(z,null,{default:l(()=>[c("Progress Status List")]),_:1})]),_:1}),e(h,null,{default:l(()=>[e(Q,{baseUrl:"/admin/progress-categories"})]),_:1})]),_:1})]))}};export{Ne as default};
